<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0" />
    <title>Projekt - WK & KK</title>
    <link rel="stylesheet" type="text/css" href="css/style_game.css" />

    <script src="js/three.js"></script>
    <!-- include jsartookit -->
    <script src="jsartoolkit5/artoolkit.min.js"></script>
    <script src="jsartoolkit5/artoolkit.api.js"></script>
    <!-- include threex.artoolkit -->
    <script src="threex/threex-artoolkitsource.js"></script>
    <script src="threex/threex-artoolkitcontext.js"></script>
    <script src="threex/threex-arbasecontrols.js"></script>
    <script src="threex/threex-armarkercontrols.js"></script>
    <script id="vertexShader" type="x-shader/x-vertex">
      uniform float refractionRatio;
      varying vec3 vRefract;
      void main()
      {
        vec4 mPosition = modelMatrix * vec4( position, 1.0 );
        vec3 nWorld = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );
        vRefract = normalize( refract( normalize( mPosition.xyz - cameraPosition ), nWorld, refractionRatio ) );
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
      }
    </script>

    <script id="fragmentShader" type="x-shader/x-vertex">
      uniform sampler2D texture;
      varying vec3 vRefract;
      uniform float distance;
      uniform float opacity;
      uniform vec3 tint;
      void main()
      {
        vec2 p = vec2( vRefract.x * distance + 0.5, vRefract.y * distance + 0.5 );
        p = vec2(1.0, 1.0) - p;
        vec3 color = texture2D( texture, p ).rgb;
        gl_FragColor = vec4( color, opacity ) * vec4( tint, 1.0 );
      }
    </script>

    <script id="vertexShader2" type="x-shader/x-vertex">
      uniform float time;
      varying vec2 textureUV;
      void main()
      {
          textureUV = uv;
        vec3 newPosition = position + vec3( 0, 0, abs(sin(time)) );
          gl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 );
      }
    </script>

    <script id="fragmentShader2" type="x-shader/x-vertex">
      uniform float time;
      uniform sampler2D baseTexture;
      varying vec2 textureUV;
      void main()
      {
        float amt = abs( sin(time) );
        vec4 tintColor = texture2D( baseTexture, textureUV ) * vec4( amt, amt, 1, 1 );
        gl_FragColor = tintColor;
      }
    </script>

    <script id="vertexShader3" type="x-shader/x-vertex">
      uniform float time;
      varying vec2 textureUV;
      uniform sampler2D baseTexture;
      void main()
      {
          textureUV = uv;
        vec2 repeatUV = textureUV * vec2(4.0, 1.0);
        float sideDisplacement = 0.0;
        // side displacement only applied near edge of texture
        if (repeatUV.y < 0.15)
        {
          float angle = atan(position.y, position.x);
          float s1 = sin(8.3 * angle);
          float s2 = sin(7.1 * angle);
          sideDisplacement = 0.08 * s1 * s1 * abs(sin(0.65*time)) + 0.09 * s2 * s2 * abs(sin(0.74*time));
        }
        vec3 newPosition = position + normal * sideDisplacement;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 );
      }
    </script>

    <script id="fragmentShader3" type="x-shader/x-vertex">
      uniform float time;
      uniform sampler2D baseTexture;
      varying vec2 textureUV;
      void main()
      {
        vec2 repeatUV = textureUV * vec2(4.0, 1.0);
        // displacement creates scrolling effect on texture
        vec2 displaceUV = repeatUV + vec2(0.0, time/20.0);
        float alpha = 1.0;
        // transparency only applied near edge of texture
        if (repeatUV.y < 0.315)
          alpha = 1.0/0.315 * repeatUV.y;
        vec4 tintColor = texture2D( baseTexture, displaceUV ) * vec4( 1.0, 1.0, 1.0, alpha );
        gl_FragColor = tintColor;
      }
    </script>
  </head>
  <body>
    <div id="screenApp">
      <div id="webcam">
        <canvas id="myCanvas">
          <script src="js/game_three.js"></script>
        </canvas>
      </div>
      <div style="clear: both"></div>

      <button class="hamburger">
        <span class="hamburger__box">
          <span class="hamburger__inner"></span>
        </span>
      </button>
      <div class="navigation">
        <ul class="navigation__list">
          <li class="navigation__item" onclick="changeModel(1)">
            <input type="button" value="Apteczka model" />
          </li>
          <li class="navigation__item" onclick="changeModel(2)">
            <input type="button" value="Respawn model" />
          </li>
          <li class="navigation__item" onclick="changeModel(3)">
            <input type="button" value="Respawn model" />
          </li>
          <li class="navigation__item" onclick="changeModel(4)">
            <input type="button" value="Respawn model" />
          </li>
          <li class="navigation__item" onclick="changeModel(5)">
            <input type="button" value="Respawn model" />
          </li>
          <li class="navigation__item" onclick="changeModel(6)">
            <input type="button" value="Respawn model" />
          </li>
          <li class="navigation__item" onclick="changeModel(7)">
            <input type="button" value="Respawn model" />
          </li>
          <li class="navigation__item" onclick="changeModel(8)">
            <input type="button" value="Respawn model" />
          </li>
          <li class="navigation__item" onclick="changeModel(2)">
            <input type="button" value="Respawn model" />
          </li>
          <li class="navigation__item" onclick="changeModel(3)">
            <input type="button" value="Respawn model" />
          </li>
        </ul>
      </div>

      <script src="js/game_javascript.js"></script>
    </div>
  </body>
</html>

<!--  <nav class="site-nav">
          <button class="side-menu-trigger">Menu</button>
          <aside class="side-menu">
            <ul>
              <li>
                <div  onclick="changeModel(1)">
                  Apteczka model
                </div>
              </li>
              <li>
                <div onclick="changeModel(2)" >
                  Respawn model
                </div>
              </li>
              <li>
                <div onclick="changeModel(3)">
                  model 3
                </div>
              </li>
              <li>
                <div onclick="changeModel(4)">
                  model 4
                </div>
              </li>
              <li>
                <div onclick="changeModel(5)">
                  Model 5
                </div>
              </li>
              <li>
                <div onclick="changeModel(6)">
                  Model 6
                </div>
              </li>
              <li>
                <div onclick="changeModel(7)">
                  Model 7
                </div>
              </li>
              <li>
                <div onclick="changeModel(8)">
                  Model 8
                </div>
              </li>
              <li>
                <div onclick="changeModel(2)">
                  Model 9
                </div>
              </li>
              <li>
                <div onclick="changeModel(3)">
                  Model 10
                </div>
              </li>
            </ul>
        </aside>
        </nav> -->
